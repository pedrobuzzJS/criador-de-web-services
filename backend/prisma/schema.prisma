// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Users {
  id                  Int @id @default(autoincrement())
  name                String
  username            String @unique
  email               String @unique
  email_verified      Boolean @default(false)
  password            String
  remember_token      String?
  created_at          DateTime? @default(now())
  updated_at          String?
  usuario_permissoes UsuarioPermissao[]
  usuario_papeis     UsuarioPapel[]

  @@map("tbusuarios")
}

model Cores {
  id Int @id @default(autoincrement())
  descricao String
  cor String
  created_at DateTime
  updated_at DateTime

  @@map("tbcores")
}

model Acoes {
  id Int @id
  descricao String
  metodo String
  created_at DateTime
  updated_at DateTime

  @@map("tbacoes")
}

model Menus {
  id Int @id
  descricao String
  icone String
  ordem Int
  desabilitado Boolean @default(false)
  pai_id Int
  acao_id Int
  papel Int
  permissao Int

  @@map("tbmenus")
}

model Papel {
  id Int @id
  nome String
  descricao String
  created_at DateTime
  usuarioPapeis UsuarioPapel[]
  papelPermissoes PapelPermissao[]

  @@map("tbpapeis")
}

model Permissao {
  id Int @id
  nome String
  descricao String
  created_at DateTime
  usuario_permissoes UsuarioPermissao[]
  pepelPermissoes PapelPermissao[]

  @@map("tbpermissoes")
}

model PapelPermissao {
  papel_id Int
  papeis Papel @relation(fields: [papel_id], references: [id])
  permissao_id Int
  permissoes Permissao @relation(fields: [permissao_id], references: [id])

  @@id([papel_id, permissao_id])

  @@map("tbpapelpermissoes")
}

model UsuarioPermissao {
  usuario_id Int
  Usuario Users @relation(fields: [usuario_id], references: [id])
  permissao_id Int
  permissao Permissao @relation(fields: [permissao_id], references: [id])

  @@id([usuario_id, permissao_id])

  @@map("tbusuariopermissoes")
}

model UsuarioPapel {
  usuario_id Int
  Usuario Users @relation(fields: [usuario_id], references: [id])
  papel_id Int
  Papel Papel @relation(fields: [papel_id], references: [id])

  @@id([usuario_id, papel_id])

  @@map("tbusuariopapeis")
}

model Status {
  id Int @id
  descricao String

  @@map("tbstatus")
}

model TipoWebService {
  id Int @id
  nome String
  descricao String
  status Int

  @@map("tbtipowebservices")
}

model WebService {
  id Int @id
  nome String
  descricao String
  prover Boolean
  consumir Boolean
  status Int

  @@map("tbwebservices")
}

model TipoBases {
  id Int @id

  @@map("tbtipobases")
}

model Bases {
  id Int @id

  @@map("tbbases")
}

model Rotas {
  id Int @id

  @@map("tbrotas")
}

model Tabelas {
  id Int @id

  @@map("tbtabelas")
}

model Colunas {
  id Int @id

  @@map("tbcolunas")
}

model TabelaLigacao {
  id Int @id

  @@map("tbtabelaligacoes")
}